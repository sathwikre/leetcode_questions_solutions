class Solution {
    public int numMagicSquaresInside(int[][] grid) {
        if(grid.length<3){
            return 0;
        }
        return find(grid);
    }
    static int find(int[][] arr){
        int c=0;
        for(int i=0;i+2<arr.length;i++){
            for(int j=0;j+2<arr[0].length;j++){
                if(ismagic(arr,i,j)){
                    c++;
                }
            }
        }
        return c;
    }
    static boolean ismagic(int[][] arr,int r,int c){
        if(arr[r+1][c+1]!=5) return false;
        boolean[] seen=new boolean[10];
        for(int i=0;i<3;i++){
            for(int j=0;j<3;j++){
                if(arr[i+r][j+c]<1||arr[i+r][j+c]>9||seen[arr[i+r][j+c]]){
                    return false;
                }
                seen[arr[i+r][j+c]]=true;
            }
        }
        for(int i=0;i<3;i++){
            if(arr[r+i][c]+arr[r+i][c+1]+arr[r+i][c+2]!=15){
                return false;
            }
        }
        for(int i=0;i<3;i++){
            if(arr[r][c+i]+arr[r+1][c+i]+arr[r+2][c+i]!=15){
                return false;
            }
        }
        
            if(arr[r+1][c+1]+arr[r+2][c+2]+arr[r][c]!=15){
                return false;
            }
          if(arr[r+1][c+1]+arr[r][c+2]+arr[r+2][c]!=15){
                return false;
            }
        
return true;
    }
}
